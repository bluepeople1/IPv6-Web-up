webpackJsonp([14],{224:function(t,e,a){var n=a(53)(a(724),a(767),null,null,null);t.exports=n.exports},259:function(t,e,a){t.exports={default:a(260),__esModule:!0}},260:function(t,e,a){a(55),a(54),t.exports=a(261)},261:function(t,e,a){var n=a(8),i=a(97);t.exports=a(6).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},266:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(259),i=a.n(n),o=a(96),s=a.n(o);e.default={props:{url:{type:String,required:!0},count:{type:Number,default:15},fun:{type:Function,default:null},init:{type:Boolean,default:!0},bLoading:{type:Boolean,default:!0}},data:function(){var t=1;"page"in this.$route.query&&(t=parseInt(this.$route.query.page));var e=this.$axios.CancelToken.source();return{data:[],total:0,page:t,param:{},m_count:this.count,sortName:"",sortType:0,cancel:e,loading:!1,m_lock:!1,waiting:!1}},watch:{page:function(t){var e=s()({},this.$route.query);e.page=t,this.$router.replace({query:e}),this.loadPage()}},methods:{loadPage:function(){var t=this;this.m_lock?console.log("send ignore"):(this.m_lock=!0,this.waiting&&(this.cancel.cancel(),this.cancel=this.$axios.CancelToken.source()),this.$nextTick(function(){t.waiting=!0,t.m_lock=!1;var e={page:t.page-1,count:t.m_count};""!=t.sortName&&(e.sortName=t.sortName,e.sortType=t.sortType),t.loading=t.bLoading,t.$axios({methods:"get",url:t.url,params:s()(e,t.param),Eload:!1,cancelToken:t.cancel.token}).then(function(e){var a=e.data;t.total=a.total,null!=t.fun&&(a.data=a.data.map(t.fun)),t.data=a.data,t.loading=!1,t.waiting=!1}).catch(function(){t.loading=!1,t.waiting=!1})}))},jump:function(t){if(t<=0||t>this.totalPage)return void this.$message.error("页码超出范围！");this.page=t},changeSort:function(t,e,a){this.sortName=e,this.sortType="descending"==a?0:1,this.reload()},changeSize:function(t){this.m_count=t,this.loadPage()},reload:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?1==this.page?this.loadPage():this.page=1:this.loadPage()},getRow:function(t,e){var a=!0,n=!1,o=void 0;try{for(var s,r=i()(this.data);!(a=(s=r.next()).done);a=!0){var l=s.value;if(l[t]==e)return l}}catch(t){n=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}return null},addParam:function(t,e){this.param[t]=e},delParam:function(t){delete this.param[t]}},created:function(){this.init&&this.loadPage()}}},267:function(t,e,a){e=t.exports=a(221)(!1),e.push([t.i,".el-pagination{text-align:right;margin-top:15px}",""])},269:function(t,e,a){var n=a(267);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(222)("4fc6ddea",n,!0,{})},270:function(t,e,a){function n(t){a(269)}var i=a(53)(a(266),a(271),n,null,null);t.exports=i.exports},271:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.data,border:"","element-loading-text":"拼命加载中",stripe:!0},on:{"sort-change":t.changeSort}},[t._t("default")],2),t._v(" "),a("div",{staticClass:"pagerFoot"},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[15,20,30,40],"page-size":t.m_count,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.changeSize,"current-change":t.jump}})],1)],1)},staticRenderFns:[]}},724:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(270),i=a.n(n),o={name:""};e.default={data:function(){return{addModal:!1,editModal:!1,user:o,mod:{id:"",name:""}}},methods:{path:function(t){this.$router.push("/admin/server?id="+t)},editOpen:function(t){this.editModal=!0,this.mod.id=t.id,this.mod.name=t.name},edit:function(){var t=this;if(""==this.mod.name)return this.$message({message:"区域名称不能为空",type:"warning"}),!1;this.$axios.put("/admin/server/addr/"+this.mod.id,{name:this.mod.name}).then(function(e){t.$message({type:"success",message:"修改成功!"}),t.mod.name="",t.$refs.user.reload()}),this.editModal=!1},del:function(t){var e=this;this.$confirm("此操作将永久删除该区域, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.delete("/admin/server/addr/"+t).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.$refs.user.reload()})})},addShow:function(t){this.addModal=!0,this.user=o},addAccount:function(){var t=this;if(""==this.user.name)return void this.$message({message:"区域名称不能为空",type:"warning"});this.$axios.post("/admin/server/addr",this.user).then(function(e){t.$message({message:"操作成功",type:"success"}),t.user.name="",t.addModal=!1,t.$refs.user.reload()})}},components:{uTable:i.a}}},767:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"g-box-content"},[a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple m-content-head"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"plus"},on:{click:function(e){t.addShow()}}},[t._v("添加区域"),a("i",{staticClass:"el-icon-plus"})])],1)])],1),t._v(" "),a("div",{staticClass:"v-table"},[a("h3",[t._v("区域列表")]),t._v(" "),a("u-table",{ref:"user",attrs:{url:"/admin/server/addr"}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"区域名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){t.path(e.row.id)}}},[t._v("查看服务器")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.editOpen(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.del(e.row.id)}}},[t._v("删除")])],1)]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加区域",visible:t.addModal,width:"45%"},on:{"update:visible":function(e){t.addModal=e}}},[a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"区域名称："}},[a("el-input",{attrs:{maxlength:"20"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),a("div",{staticClass:"v-modal-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addAccount}},[t._v("添加")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改区域",visible:t.editModal,width:"45%"},on:{"update:visible":function(e){t.editModal=e}}},[a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"区域名称："}},[a("el-input",{attrs:{maxlength:"20"},model:{value:t.mod.name,callback:function(e){t.$set(t.mod,"name",e)},expression:"mod.name"}})],1),t._v(" "),a("div",{staticClass:"v-modal-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.edit}},[t._v("修改")])],1)],1)],1)],1)},staticRenderFns:[]}}});