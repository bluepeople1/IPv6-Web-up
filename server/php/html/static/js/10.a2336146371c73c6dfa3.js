webpackJsonp([10],{234:function(e,t,a){var n=a(53)(a(735),a(781),null,null,null);e.exports=n.exports},259:function(e,t,a){e.exports={default:a(260),__esModule:!0}},260:function(e,t,a){a(55),a(54),e.exports=a(261)},261:function(e,t,a){var n=a(8),i=a(97);e.exports=a(6).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},266:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(259),i=a.n(n),s=a(96),l=a.n(s);t.default={props:{url:{type:String,required:!0},count:{type:Number,default:15},fun:{type:Function,default:null},init:{type:Boolean,default:!0},bLoading:{type:Boolean,default:!0}},data:function(){var e=1;"page"in this.$route.query&&(e=parseInt(this.$route.query.page));var t=this.$axios.CancelToken.source();return{data:[],total:0,page:e,param:{},m_count:this.count,sortName:"",sortType:0,cancel:t,loading:!1,m_lock:!1,waiting:!1}},watch:{page:function(e){var t=l()({},this.$route.query);t.page=e,this.$router.replace({query:t}),this.loadPage()}},methods:{loadPage:function(){var e=this;this.m_lock?console.log("send ignore"):(this.m_lock=!0,this.waiting&&(this.cancel.cancel(),this.cancel=this.$axios.CancelToken.source()),this.$nextTick(function(){e.waiting=!0,e.m_lock=!1;var t={page:e.page-1,count:e.m_count};""!=e.sortName&&(t.sortName=e.sortName,t.sortType=e.sortType),e.loading=e.bLoading,e.$axios({methods:"get",url:e.url,params:l()(t,e.param),Eload:!1,cancelToken:e.cancel.token}).then(function(t){var a=t.data;e.total=a.total,null!=e.fun&&(a.data=a.data.map(e.fun)),e.data=a.data,e.loading=!1,e.waiting=!1}).catch(function(){e.loading=!1,e.waiting=!1})}))},jump:function(e){if(e<=0||e>this.totalPage)return void this.$message.error("页码超出范围！");this.page=e},changeSort:function(e,t,a){this.sortName=t,this.sortType="descending"==a?0:1,this.reload()},changeSize:function(e){this.m_count=e,this.loadPage()},reload:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?1==this.page?this.loadPage():this.page=1:this.loadPage()},getRow:function(e,t){var a=!0,n=!1,s=void 0;try{for(var l,r=i()(this.data);!(a=(l=r.next()).done);a=!0){var o=l.value;if(o[e]==t)return o}}catch(e){n=!0,s=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}return null},addParam:function(e,t){this.param[e]=t},delParam:function(e){delete this.param[e]}},created:function(){this.init&&this.loadPage()}}},267:function(e,t,a){t=e.exports=a(221)(!1),t.push([e.i,".el-pagination{text-align:right;margin-top:15px}",""])},269:function(e,t,a){var n=a(267);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(222)("4fc6ddea",n,!0,{})},270:function(e,t,a){function n(e){a(269)}var i=a(53)(a(266),a(271),n,null,null);e.exports=i.exports},271:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.data,border:"","element-loading-text":"拼命加载中",stripe:!0},on:{"sort-change":e.changeSort}},[e._t("default")],2),e._v(" "),a("div",{staticClass:"pagerFoot"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[15,20,30,40],"page-size":e.m_count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.jump}})],1)],1)},staticRenderFns:[]}},735:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(259),i=a.n(n),s=a(270),l=a.n(s),r={belong:"",server:"",ipaddr:"",flow:1,site:1,desc:""};t.default={data:function(){return{addModal:!1,editModal:!1,bindModal:!1,user:r,userData:[],serverData:[],bindUser:"",modId:"",bindId:"",bindV6Id:"",bindV6User:"",v6Data:[],fitterBelong:0,bindV6Modal:!1,mod:{flow:1,site:1}}},methods:{delbind:function(e){var t=this;this.$confirm("此操作将解除对该v6地址, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.delete("/admin/v6addr/auth/"+e).then(function(e){t.$message({type:"success",message:"解绑成功!"}),t.$refs.user.reload()})})},openV6:function(e){this.$router.push("/admin/v6Upgrade?vid="+e)},fitterSite:function(){var e=this;return this.v6Data.filter(function(t){return t.belong==e.fitterBelong})},bindv6Account:function(){var e=this;this.$axios.post("/admin/site/bind",{sid:this.bindV6User,vid:this.bindV6Id}).then(function(t){e.$message({type:"success",message:"绑定成功!"}),e.bindV6Modal=!1,e.$refs.user.reload()})},bindV6Fn:function(e){var t=this;this.bindV6Modal=!0,this.bindV6Id=e.id,this.fitterBelong=e.belongId,0==this.v6Data.length&&this.$axios.get("/admin/site/siteBrief").then(function(e){t.v6Data=e.data})},getuserbrief:function(){var e=this;this.$axios.get("/admin/account/userbrief").then(function(t){e.userData=t.data})},bind:function(e){this.bindModal=!0,this.bindId=e,0==this.userData.length&&this.getuserbrief()},bindAccount:function(){var e=this;this.$axios.post("/admin/v6addr/auth",{vid:this.bindId,uid:this.bindUser}).then(function(t){e.$message({type:"success",message:"绑定成功"}),e.bindModal=!1,e.$refs.user.reload()})},editOpen:function(e){this.editModal=!0,this.mod.flow=e.flow,this.mod.site=e.site,this.modId=e.id},modAccount:function(){var e=this;this.$axios.put("/admin/v6addr/addr/"+this.modId,this.mod).then(function(t){e.$message({type:"success",message:"修改成功"}),e.editModal=!1,e.$refs.user.reload()})},del:function(e){var t=this;this.$confirm("此操作将永久删除该v6地址, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.delete("/admin/v6addr/addr/"+e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.$refs.user.reload()})})},addShow:function(e){var t=this;this.addModal=!0,this.user=r,0==this.userData.length&&this.getuserbrief(),0==this.serverData.length&&this.$axios.get("/admin/server/serverBrief").then(function(e){var a=!0,n=!1,s=void 0;try{for(var l,r=i()(e.data);!(a=(l=r.next()).done);a=!0){var o=l.value;t.serverData.push({value:o.id,label:o.name})}}catch(e){n=!0,s=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}})},addAccount:function(){var e=this;this.$axios.post("/admin/v6addr/Addr",this.user).then(function(t){e.$message({message:"操作成功",type:"success"}),e.addModal=!1,e.$refs.user.reload(),e.user.belong="",e.user.server="",e.user.ipaddr="",e.user.flow=1,e.user.site=1,e.user.desc=""})}},components:{uTable:l.a}}},781:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"g-box-content"},[a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple m-content-head"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"plus"},on:{click:function(t){e.addShow()}}},[e._v("添加v6地址"),a("i",{staticClass:"el-icon-plus"})])],1)])],1),e._v(" "),a("div",{staticClass:"v-table"},[a("h3",[e._v("v6地址列表")]),e._v(" "),a("u-table",{ref:"user",attrs:{url:"/admin/v6addr/addr"}},[a("el-table-column",{attrs:{align:"center",prop:"addr",label:"区域"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"belong",label:"所属企业"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"flow",label:"带宽（M）"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ipaddr",label:"V6地址"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"server",label:"服务器"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bindNum",label:"绑定次数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"site",label:"绑定上限"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.desc.length>=8?a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.desc,placement:"top"}},[a("div",{staticClass:"v-desc"},[e._v(e._s(t.row.desc))])])],1):a("div",[a("span",[e._v(e._s(t.row.desc))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"time",label:"添加时间",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.bindV6Fn(t.row)}}},[e._v("v6升级")]),e._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){e.openV6(t.row.id)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.editOpen(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")])],1)]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加v6地址",visible:e.addModal,width:"45%"},on:{"update:visible":function(t){e.addModal=t}}},[a("el-form",{attrs:{"label-width":"160px"}},[a("el-form-item",{attrs:{label:"V6地址："}},[a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"39"},model:{value:e.user.ipaddr,callback:function(t){e.$set(e.user,"ipaddr",t)},expression:"user.ipaddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"带宽（M）："}},[a("el-input-number",{attrs:{min:1,max:999},model:{value:e.user.flow,callback:function(t){e.$set(e.user,"flow",t)},expression:"user.flow"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定上限："}},[a("el-input-number",{attrs:{min:1,max:99},model:{value:e.user.site,callback:function(t){e.$set(e.user,"site",t)},expression:"user.site"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属企业："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.user.belong,callback:function(t){e.$set(e.user,"belong",t)},expression:"user.belong"}},e._l(e.userData,function(e){return a("el-option",{key:e.id,attrs:{label:e.nickName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属服务器："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.user.server,callback:function(t){e.$set(e.user,"server",t)},expression:"user.server"}},e._l(e.serverData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"45"},model:{value:e.user.desc,callback:function(t){e.$set(e.user,"desc",t)},expression:"user.desc"}})],1),e._v(" "),a("div",{staticClass:"v-modal-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addAccount}},[e._v("添加")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改v6地址",visible:e.editModal,width:"45%"},on:{"update:visible":function(t){e.editModal=t}}},[a("el-form",{attrs:{"label-width":"160px"}},[a("el-form-item",{attrs:{label:"带宽（M）："}},[a("el-input-number",{attrs:{min:1,max:999},model:{value:e.mod.flow,callback:function(t){e.$set(e.mod,"flow",t)},expression:"mod.flow"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定上限："}},[a("el-input-number",{attrs:{min:1,max:99},model:{value:e.mod.site,callback:function(t){e.$set(e.mod,"site",t)},expression:"mod.site"}})],1),e._v(" "),a("div",{staticClass:"v-modal-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.modAccount}},[e._v("修改")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"授权给用户",visible:e.bindModal,width:"45%"},on:{"update:visible":function(t){e.bindModal=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.bindUser,callback:function(t){e.bindUser=t},expression:"bindUser"}},e._l(e.userData,function(e){return a("el-option",{key:e.id,attrs:{label:e.nickName,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"v-modal-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.bindAccount}},[e._v("添加")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"v6升级",visible:e.bindV6Modal,width:"45%"},on:{"update:visible":function(t){e.bindV6Modal=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"网站："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.bindV6User,callback:function(t){e.bindV6User=t},expression:"bindV6User"}},e._l(e.fitterSite(),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"v-modal-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.bindv6Account}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]}}});