webpackJsonp([6],{230:function(e,t,a){function r(e){a(761)}var s=a(53)(a(731),a(782),r,"data-v-b356c484",null);e.exports=s.exports},259:function(e,t,a){e.exports={default:a(260),__esModule:!0}},260:function(e,t,a){a(55),a(54),e.exports=a(261)},261:function(e,t,a){var r=a(8),s=a(97);e.exports=a(6).getIterator=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},266:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(259),s=a.n(r),i=a(96),n=a.n(i);t.default={props:{url:{type:String,required:!0},count:{type:Number,default:15},fun:{type:Function,default:null},init:{type:Boolean,default:!0},bLoading:{type:Boolean,default:!0}},data:function(){var e=1;"page"in this.$route.query&&(e=parseInt(this.$route.query.page));var t=this.$axios.CancelToken.source();return{data:[],total:0,page:e,param:{},m_count:this.count,sortName:"",sortType:0,cancel:t,loading:!1,m_lock:!1,waiting:!1}},watch:{page:function(e){var t=n()({},this.$route.query);t.page=e,this.$router.replace({query:t}),this.loadPage()}},methods:{loadPage:function(){var e=this;this.m_lock?console.log("send ignore"):(this.m_lock=!0,this.waiting&&(this.cancel.cancel(),this.cancel=this.$axios.CancelToken.source()),this.$nextTick(function(){e.waiting=!0,e.m_lock=!1;var t={page:e.page-1,count:e.m_count};""!=e.sortName&&(t.sortName=e.sortName,t.sortType=e.sortType),e.loading=e.bLoading,e.$axios({methods:"get",url:e.url,params:n()(t,e.param),Eload:!1,cancelToken:e.cancel.token}).then(function(t){var a=t.data;e.total=a.total,null!=e.fun&&(a.data=a.data.map(e.fun)),e.data=a.data,e.loading=!1,e.waiting=!1}).catch(function(){e.loading=!1,e.waiting=!1})}))},jump:function(e){if(e<=0||e>this.totalPage)return void this.$message.error("页码超出范围！");this.page=e},changeSort:function(e,t,a){this.sortName=t,this.sortType="descending"==a?0:1,this.reload()},changeSize:function(e){this.m_count=e,this.loadPage()},reload:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?1==this.page?this.loadPage():this.page=1:this.loadPage()},getRow:function(e,t){var a=!0,r=!1,i=void 0;try{for(var n,l=s()(this.data);!(a=(n=l.next()).done);a=!0){var o=n.value;if(o[e]==t)return o}}catch(e){r=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}return null},addParam:function(e,t){this.param[e]=t},delParam:function(e){delete this.param[e]}},created:function(){this.init&&this.loadPage()}}},267:function(e,t,a){t=e.exports=a(221)(!1),t.push([e.i,".el-pagination{text-align:right;margin-top:15px}",""])},269:function(e,t,a){var r=a(267);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(222)("4fc6ddea",r,!0,{})},270:function(e,t,a){function r(e){a(269)}var s=a(53)(a(266),a(271),r,null,null);e.exports=s.exports},271:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.data,border:"","element-loading-text":"拼命加载中",stripe:!0},on:{"sort-change":e.changeSort}},[e._t("default")],2),e._v(" "),a("div",{staticClass:"pagerFoot"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[15,20,30,40],"page-size":e.m_count,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.jump}})],1)],1)},staticRenderFns:[]}},342:function(e,t,a){"use strict";var r=a(96),s=(a.n(r),a(259));a.n(s)},731:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(259),s=a.n(r),i=(a(342),a(270)),n=a.n(i),l={name:"",mask:"",ipaddr:"",version:"",addr:""};t.default={data:function(){return{addModal:!1,editModal:!1,user:l,mod:{id:"",name:"",version:""},addrData:[],filtrate:{addr:"",name:"",mask:"",ipaddr:""},faddrData:[]}},watch:{"filtrate.addr":function(e){-1==e?this.$refs.user.addParam("addr"):this.$refs.user.addParam("addr",e),this.$refs.user.reload()},"filtrate.name":function(e){-1==e?this.$refs.user.addParam("name"):this.$refs.user.addParam("name",e),this.$refs.user.reload()},"filtrate.mask":function(e){-1==e?this.$refs.user.addParam("mask"):this.$refs.user.addParam("mask",e),this.$refs.user.reload()},"filtrate.ipaddr":function(e){-1==e?this.$refs.user.addParam("ipaddr"):this.$refs.user.addParam("ipaddr",e),this.$refs.user.reload()},$route:function(){"index"==this.$route.params.id&&(this.filtrate.addr=-1)}},created:function(){var e=this;void 0!==this.$route.query.id&&(this.filtrate.addr=this.$route.query.id),this.$axios.get("/admin/server/addrBrief").then(function(t){e.faddrData=[];var a=!0,r=!1,i=void 0;try{for(var n,l=s()(t.data);!(a=(n=l.next()).done);a=!0){var o=n.value;e.faddrData.push({value:o.id,label:o.name})}}catch(e){r=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}e.faddrData.unshift({value:-1,label:"所有"})})},methods:{editOpen:function(e){this.editModal=!0,this.mod.id=e.id,this.mod.name=e.name,this.mod.version=e.version},edit:function(){var e=this;if(""==this.mod.name)return this.$message({message:"服务器名称不能为空",type:"warning"}),!1;this.$axios.put("/admin/server/server/"+this.mod.id,{name:this.mod.name,version:this.mod.version}).then(function(t){e.$message({type:"success",message:"修改成功!"}),e.$refs.user.reload()}),this.editModal=!1},del:function(e){var t=this;this.$confirm("此操作将永久删除该服务器, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.delete("/admin/server/server/"+e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.$refs.user.reload()})})},addShow:function(e){var t=this;this.addModal=!0,this.user=l,this.$axios.get("/admin/server/addrBrief").then(function(e){t.addrData=[];var a=!0,r=!1,i=void 0;try{for(var n,l=s()(e.data);!(a=(n=l.next()).done);a=!0){var o=n.value;t.addrData.push({value:o.id,label:o.name})}}catch(e){r=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}})},addAccount:function(){var e=this;return""==this.user.name?void this.$message({message:"服务器名称不能为空",type:"warning"}):""==this.user.mask?void this.$message({message:"IPv6前缀不能为空",type:"warning"}):""==this.user.ipaddr?void this.$message({message:"服务器地址不能为空",type:"warning"}):""==this.user.version?void this.$message({message:"版本号不能为空",type:"warning"}):""==this.user.addr?void this.$message({message:"区域不能为空",type:"warning"}):void this.$axios.post("/admin/server/server",this.user).then(function(t){e.$message({message:"操作成功",type:"success"}),e.user.name="",e.user.mask="",e.user.ipaddr="",e.user.version="",e.user.addr="",e.addModal=!1,e.$refs.user.reload()})}},components:{uTable:n.a}}},752:function(e,t,a){t=e.exports=a(221)(!1),t.push([e.i,".v-server-list[data-v-b356c484]{margin:15px 0}",""])},761:function(e,t,a){var r=a(752);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(222)("70c324ab",r,!0,{})},782:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"g-box-content"},[a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple m-content-head"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"plus"},on:{click:function(t){e.addShow()}}},[e._v("添加服务器"),a("i",{staticClass:"el-icon-plus"})])],1)])],1),e._v(" "),a("el-row",{staticClass:"grid-content bg-purple m-content-head v-server"},[a("el-col",{staticClass:"mt5 bg-purple",attrs:{span:6}},[a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"区域"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.filtrate.addr,callback:function(t){e.$set(e.filtrate,"addr",t)},expression:"filtrate.addr"}},e._l(e.faddrData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-col",{staticClass:"mt5",attrs:{span:6}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"服务器"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.filtrate.name,callback:function(t){e.$set(e.filtrate,"name",t)},expression:"filtrate.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"mt5",attrs:{span:6}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"IPv6前缀"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.filtrate.mask,callback:function(t){e.$set(e.filtrate,"mask",t)},expression:"filtrate.mask"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"mt5",attrs:{span:6}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"服务器地址"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.filtrate.ipaddr,callback:function(t){e.$set(e.filtrate,"ipaddr",t)},expression:"filtrate.ipaddr"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"v-table"},[a("h3",[e._v("服务器列表")]),e._v(" "),a("u-table",{ref:"user",attrs:{url:"/admin/server/server"}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"addr",label:"区域"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"服务器名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mask",label:"IPv6前缀",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ipaddr",label:"服务器地址",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"num",label:"IPv6升级次数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"是否在线"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.online?a("el-tag",{attrs:{type:"success"}},[e._v("在线")]):a("el-tag",{attrs:{type:"danger"}},[e._v("掉线")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"version",label:"版本号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.editOpen(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")])],1)]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加服务器",visible:e.addModal,width:"45%"},on:{"update:visible":function(t){e.addModal=t}}},[a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"服务器名称："}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IPv6前缀："}},[a("el-input",{attrs:{maxlength:"39"},model:{value:e.user.mask,callback:function(t){e.$set(e.user,"mask",t)},expression:"user.mask"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器地址："}},[a("el-input",{attrs:{maxlength:"39"},model:{value:e.user.ipaddr,callback:function(t){e.$set(e.user,"ipaddr",t)},expression:"user.ipaddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本号："}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.user.version,callback:function(t){e.$set(e.user,"version",t)},expression:"user.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.user.addr,callback:function(t){e.$set(e.user,"addr",t)},expression:"user.addr"}},e._l(e.addrData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"v-modal-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addAccount}},[e._v("添加")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改服务器",visible:e.editModal,width:"45%"},on:{"update:visible":function(t){e.editModal=t}}},[a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"服务器名称："}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.mod.name,callback:function(t){e.$set(e.mod,"name",t)},expression:"mod.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本号："}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.mod.version,callback:function(t){e.$set(e.mod,"version",t)},expression:"mod.version"}})],1),e._v(" "),a("div",{staticClass:"v-modal-footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.edit}},[e._v("修改")])],1)],1)],1)],1)},staticRenderFns:[]}}});